<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Franklin Bristow" />
  <title>Debugging strategies</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../styles.css" />
</head>
<body>

<div id="main-outer-box">

<div id="my-header">
  <a href="../index.html">Introduction to Tools and Techniques in Computer Science</a>
</div>

<div id="trunk-box">

<div id="nav-box">
<p>Contents:</p>
<ul>
<li>Setup, writing structured text, and file management
<ul>
<li><a href=".././topic01/topic-1.html">Introduction</a></li>
<li><a href=".././topic01/topic-2.html">Installing software on your
personal computer</a></li>
<li><a href=".././topic01/topic-3.html">Write plain text
documents</a></li>
<li><a href=".././topic01/topic-4.html">Converting documents to
different formats</a></li>
<li><a href=".././topic01/topic-5.html">Organizing your files</a></li>
<li><a href=".././topic01/topic-6.html">Summary</a></li>
</ul></li>
<li>Remote connections and command-line file management
<ul>
<li><a href=".././topic02/topic-0.html">Introduction</a></li>
<li><a href=".././topic02/topic-1.html">Connecting to a remote
computer</a></li>
<li><a href=".././topic02/topic-2.html">Command line file
management</a></li>
<li><a href=".././topic02/topic-3.html">Command line text
editing</a></li>
<li><a href=".././topic02/topic-4.html">Tab completion</a></li>
<li><a href=".././topic02/topic-5.html">Transferring files</a></li>
<li><a href=".././topic02/topic-6.html">handin</a></li>
<li><a href=".././topic02/topic-7.html">Summary</a></li>
</ul></li>
<li>Compiling and running code, version control
<ul>
<li><a href=".././topic03/topic-1.html">Introduction</a></li>
<li><a href=".././topic03/topic-2.html">Compiling and running
code</a></li>
<li><a href=".././topic03/topic-3.html">Version Control</a></li>
<li><a href=".././topic03/topic-4.html">Summary</a></li>
</ul></li>
<li>Advanced version control, project management
<ul>
<li><a href=".././topic04/topic-1.html">Introduction</a></li>
<li><a href=".././topic04/topic-2.html">Advanced version
control</a></li>
<li><a href=".././topic04/topic-3.html">Managing personal
projects</a></li>
<li><a href=".././topic04/topic-4.html">Summary</a></li>
</ul></li>
<li>Advanced shell usage
<ul>
<li><a href=".././topic05/topic-1.html">Introduction</a></li>
<li><a href=".././topic05/topic-2.html">Finding files</a></li>
<li><a href=".././topic05/topic-3.html">Filtering lines</a></li>
<li><a href=".././topic05/topic-4.html">Reading and changing
permissions</a></li>
<li><a href=".././topic05/topic-5.html">Comparing plain text
files</a></li>
<li><a href=".././topic05/topic-6.html">Summary</a></li>
</ul></li>
<li>Digital notebooks and getting help
<ul>
<li><a href=".././topic06/topic-1.html">Introduction</a></li>
<li><a href=".././topic06/topic-2.html">Getting help</a></li>
<li><a href=".././topic06/topic-3.html">Getting help — Examples</a></li>
<li><a href=".././topic06/topic-4.html">Academic misconduct</a></li>
<li><a href=".././topic06/topic-5.html">Digital notebooks</a></li>
<li><a href=".././topic06/topic-6.html">Summary</a></li>
</ul></li>
<li>Debugging (strategies and usage)
<ul>
<li><a href="topic-1.html">Introduction</a></li>
<li><a href="topic-2.html">What even is debugging?</a></li>
<li><strong>Debugging strategies</strong></li>
<li><a href="topic-4.html">Debuggers</a></li>
<li><a href="topic-5.html">Visual Debuggers</a></li>
<li><a href="topic-6.html">Command-line Debuggers</a></li>
<li><a href="topic-7.html">Summary</a></li>
<li><a href="topic-8.html">Practice Questions</a></li>
</ul></li>
<li>Command-line environment
<ul>
<li><a href=".././topic08/topic-1.html">Introduction</a></li>
<li><a href=".././topic08/topic-2.html">Input and output on the command
line</a></li>
<li><a href=".././topic08/topic-3.html">Redirecting input and
output</a></li>
<li><a href=".././topic08/topic-4.html">Piping</a></li>
<li><a href=".././topic08/topic-5.html">Choose a backup
strategy</a></li>
<li><a href=".././topic08/topic-6.html">Install and configure back up
software</a></li>
<li><a href=".././topic08/topic-7.html">Summary</a></li>
<li><a href=".././topic08/topic-8.html">Practice Questions</a></li>
</ul></li>
<li>Shell scripting
<ul>
<li><a href=".././topic09/topic-1.html">Introduction</a></li>
<li><a href=".././topic09/topic-2.html">Shell scripts</a></li>
<li><a href=".././topic09/topic-3.html">Arguments</a></li>
<li><a href=".././topic09/topic-4.html">Structures: conditional
statements and loops</a></li>
<li><a href=".././topic09/topic-5.html">Globs</a></li>
<li><a href=".././topic09/topic-6.html">Debugging shell scripts</a></li>
<li><a href=".././topic09/topic-7.html">Summary</a></li>
</ul></li>
<li>Build systems and dependency management
<ul>
<li><a href=".././topic10/topic-1.html">Introduction</a></li>
<li><a href=".././topic10/topic-2.html">Programs requiring
dependencies</a></li>
<li><a href=".././topic10/topic-3.html">Create a Makefile</a></li>
<li><a href=".././topic10/topic-4.html">Build and dependency
management</a></li>
<li><a href=".././topic10/topic-5.html">Summary</a></li>
</ul></li>
<li>Containers, virtual machines, and “The Cloud ™”
<ul>
<li><a href=".././topic11/topic-1.html">Introduction</a></li>
<li><a href=".././topic11/topic-2.html">Install and configure a virtual
machine</a></li>
<li><a href=".././topic11/topic-3.html">Download and use a pre-installed
OS in VM software</a></li>
<li><a href=".././topic11/topic-4.html">Run a command within a
container</a></li>
<li><a href=".././topic11/topic-5.html">Initialize a server in a public
cloud</a></li>
<li><a href=".././topic11/topic-6.html">Summary</a></li>
<li><a href=".././topic11/hello-pandocker.html">Hello,
Pandocker!</a></li>
</ul></li>
<li>Running your own Linux system
<ul>
<li><a href=".././topic12/topic-1.html">Introduction</a></li>
<li><a href=".././topic12/topic-2.html">Choose a Linux
distribution</a></li>
<li><a href=".././topic12/topic-3.html">Install a Linux
distribution</a></li>
<li><a href=".././topic12/topic-4.html">Install packages</a></li>
<li><a href=".././topic12/topic-5.html">Configure and run a web
server</a></li>
<li><a href=".././topic12/topic-6.html">Summary</a></li>
</ul></li>
<li><a href=".././README.html">About this book</a></li>
</ul>

</div>

<div id="article-box">

<div id="header-nav-bar">
<div><a href="topic-2.html">←prev</a></div><div class="nav-bar-push"><a href="topic-4.html">next→</a></div>
</div>

<div id="article-content">
<header id="title-block-header">
<h1 class="title">Debugging strategies</h1>
<p class="author">Franklin Bristow</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#debugging-strategies"
id="toc-debugging-strategies">Debugging strategies</a>
<ul>
<li><a href="#pencil-and-paper-debugging"
id="toc-pencil-and-paper-debugging">Pencil-and-paper debugging</a></li>
<li><a href="#log-based-debugging"
id="toc-log-based-debugging">Log-based debugging</a>
<ul>
<li><a href="#languages-with-meaningful-error-messages"
id="toc-languages-with-meaningful-error-messages">Languages with
meaningful error messages</a></li>
<li><a href="#languages-without-meaningful-error-messages"
id="toc-languages-without-meaningful-error-messages">Languages without
meaningful error messages</a></li>
<li><a href="#general-advice-for-log-based-debugging"
id="toc-general-advice-for-log-based-debugging">General advice for
log-based debugging</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="debugging-strategies">Debugging strategies</h1>
<h2 id="pencil-and-paper-debugging">Pencil-and-paper debugging</h2>
<p>Pencil-and-paper debugging is the most primitive form of debugging
and uses the simplest tools: a pencil (or pen) and a piece (or two) of
paper.</p>
<figure>
<img src="pencil.jpg"
alt="I don’t advocate for chewing on your pencil even if debugging is stressful. (Pixabay License)" />
<figcaption aria-hidden="true">I don’t advocate for chewing on your
pencil even if debugging is stressful. (<a
href="https://pixabay.com/photos/pencil-notebook-crumpled-paper-1891732/">Pixabay
License</a>)</figcaption>
</figure>
<p>Here’s the strategy:</p>
<ol type="1">
<li>Find where your program starts executing like the <code>main</code>
method or function or the first line of code in the file.</li>
<li>If there are any “global” variables (<code>static</code> or
file-scope variables), write down those variable names and their values
on the top of the page or a corner of the page that you mark as
“global”.</li>
<li>Write on your piece of paper any variables that are you know about
that are in scope when the function starts like
<code>String[] args</code> or <code>int argc</code> and
<code>char **argv</code>.</li>
<li>“Run” the first line of code in your head. If the value of the
variables that you have in scope has changed, cross out or erase the old
value and write down the new value.
<ol type="a">
<li>If the line of code is a function or method call, draw a line under
your currently scoped variables, move your finger to the function or
method and start again at (2).</li>
<li>When the function or method <code>return</code>s, cross off or erase
all currently in-scope variables.</li>
</ol></li>
<li>Move to the next line of code and repeat (3) until the program is
“done” or until you uncover the incorrect flow or incorrect state of
your program.</li>
</ol>
<p>Yes, this is tedious. Painfully tedious.</p>
<p>No, this doesn’t scale to thousands or millions of lines of code
(you’re not writing thousands or millions of lines of code yet).</p>
<p>No, this doesn’t scale to working with even kilobytes of data (you
<em>might</em> be working with kilobytes of data, maybe).</p>
<p>Despite the tedium and the lack of ability to scale, this is a good
way to debug your code because it forces you to evaluate and trace the
flow of your program. This strategy makes you <a
href="https://en.wikipedia.org/wiki/Computer#Etymology">become the
computer</a>.</p>
<h2 id="log-based-debugging">Log-based debugging</h2>
<div class="outcomes">
<ul class="task-list">
<li><label><input type="checkbox" checked="" />Use log-based debugging
to identify a problem with code.</label></li>
</ul>
</div>
<p>Pencil-and-paper debugging is a tedious but effective strategy for
finding out where the flow of your program goes wrong, or what values
your variables have when your program crashes.</p>
<p>But it’s tedious. Painfully tedious.</p>
<p>Another strategy for debugging your code that’s primitive and
<em>usually</em> effective is log- or print-based debugging. This
strategy uses tools that are entirely digital: The functions or methods
you call to print output (<code>System.out.println()</code>,
<code>print()</code>, <code>console.log</code>,
<code>printf()</code>).</p>
<p>The strategy is simple, but where you start depends on the kinds of
error messages your programming language produces:</p>
<ul>
<li>Some programming languages like Java or Python produce meaningful
error messages that tell you specifically which line of code the program
crashed on and what the error was when the crash happened.</li>
<li>Some programming language do not produce meaningful errors. Like C,
I’m specifically looking at you, C. We’re not bitter about C at
all.</li>
</ul>
<h3 id="languages-with-meaningful-error-messages">Languages with
meaningful error messages</h3>
<p>If your language produces meaningful error messages that include the
file and line number that your program crashed on, then that’s the best
place to start adding print or log statements.</p>
<p>Find the line of code reported in the error message and print out the
values of variables that are in scope <em>just before</em> the crash
happened, then run your program again and hope it still crashes.
Sometimes seeing that a variable you expected to never be
<code>null</code> having a value of <code>null</code> is enough to help
you move forward.</p>
<p>The flow of our program was partially revealed by the error message,
but the error message doesn’t tell us what happened before that, just
the state of the <a href="https://en.wikipedia.org/wiki/Call_stack">call
stack</a>, so we still may need to figure out how we got here. In this
case, the strategy for adding more print or log statements is to work
backwards from the site of the crash:</p>
<ul>
<li>If your code crashes inside a conditional statement, print out the
values just before entering the conditional statement.</li>
<li>If your code crashes inside a loop, print out the values of the
variables that are in scope and relevant inside to loop to see how they
change each iteration.</li>
<li>If your code crashes inside a function, look back at the error
message and see which line of code caused your program to enter that
function, and add print messages <em>just before</em> calling the
function in the first place.</li>
</ul>
<p>Repeat this until you’re able to identify where your program’s flow
has gone an unexpected way or until you’re able to identify when and how
your variables have their values changed to something unexpected.</p>
<h3 id="languages-without-meaningful-error-messages">Languages without
meaningful error messages</h3>
<p>If your language does not produce meaningful error messages, then we
need to follow a strategy that resembles pencil-and-paper debugging:
Start printing out the values of variables in the place where our code
starts (like the <code>main</code> function).</p>
<p>If there’s a line of code that contains a call to a function, you
don’t necessarily have to trace the flow through that function, you may
only care that the value you get back from the function is what you
expect, so adding print statements before and after the call is
enough:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;The value right now is [</span><span class="sc">%s</span><span class="st">]</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> my_string<span class="op">);</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>my_function<span class="op">(</span>my_string<span class="op">);</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;Now the value is [</span><span class="sc">%s</span><span class="st">]</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> my_string<span class="op">);</span></span></code></pre></div>
<p>If you can see that the value <em>was not</em> what you expected,
then move your editor to that function call and start adding similar
print messages until you find a single statement that you wrote that
causes your program to flow incorrectly, or that changes the value of a
variable in a way you weren’t expecting.</p>
<h3 id="general-advice-for-log-based-debugging">General advice for
log-based debugging</h3>
<p>Here are some very general tips for log-based debugging:</p>
<ul>
<li><p>Print the <strong>name</strong> of the variable that you’re
trying to inspect. Modern Python has a shortcut for this:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>message <span class="op">=</span> <span class="st">&quot;Hello&quot;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>hello<span class="op">=</span><span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<p>In other languages it’s just including the name of the variable in
your print statement:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> variable <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">printf</span><span class="op">(</span><span class="st">&quot;variable = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> variable<span class="op">);</span></span></code></pre></div></li>
<li><p>Print the <strong>line number</strong> that the print statement
is on. You can print the line number in C with a magic variable:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;The current line number is </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> __LINE__<span class="op">);</span></span></code></pre></div></li>
<li><p>When working with strings, <strong>wrap the value</strong> with
symbols you know won’t or shouldn’t be in the string so that you can see
(for example) leading or trailing space characters:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dt">final</span> <span class="bu">String</span> message <span class="op">=</span> <span class="st">&quot;   spaces</span><span class="sc">\t</span><span class="st">!!!</span><span class="sc">\r\n</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;message is [&quot;</span> <span class="op">+</span> message <span class="op">+</span> <span class="st">&quot;]&quot;</span><span class="op">);</span></span></code></pre></div>
<p>This is particularly helpful in C when you’re working with
strings.</p></li>
</ul>

</div> <!-- article-content -->

<div id="footer-nav-bar">
<div><a href="topic-2.html">←prev</a></div><div class="nav-bar-push"><a href="topic-4.html">next→</a></div>
</div>

</div> <!-- article-box -->

</div> <!-- trunk-box -->

<div id="my-footer">
&copy; Franklin Bristow 2022 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a><br/>
<a href="topic-3.md">Pandoc-Markdown source for this page</a><br/>
(Docs processed by
<a href="http://www.unexpected-vortices.com/sw/rippledoc/index.html">Rippledoc</a>.)
</div> <!-- my-footer -->

</div> <!-- main-outer-box -->

</body>
</html>
